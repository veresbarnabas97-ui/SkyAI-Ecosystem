<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkyAI Ecosystem | Master Hub</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;500;700&family=Space+Grotesk:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js"></script>
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>

    <style>
        :root {
            --bg-dark: #050507;
            --panel-bg: rgba(15, 20, 30, 0.7);
            --neon-blue: #00f3ff;
            --neon-gold: #ffd700;
            --neon-purple: #bc13fe;
            --success: #00ff9d;
            --danger: #ff2a51;
            --glass: blur(10px);
            --border: 1px solid rgba(255,255,255,0.1);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; scrollbar-width: thin; }
        
        body {
            background-color: var(--bg-dark);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(0, 243, 255, 0.05) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(188, 19, 254, 0.05) 0%, transparent 40%);
            color: #fff;
            font-family: 'Space Grotesk', sans-serif;
            overflow-x: hidden;
        }

        /* --- LAYOUT GRID --- */
        .master-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            min-height: 100vh;
        }

        /* --- SIDEBAR (NAVIGATION) --- */
        .sidebar {
            background: rgba(0,0,0,0.8);
            border-right: var(--border);
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            backdrop-filter: var(--glass);
            position: sticky;
            top: 0;
            height: 100vh;
        }

        .brand {
            font-family: 'Orbitron';
            font-size: 1.5rem;
            color: #fff;
            margin-bottom: 40px;
            text-align: center;
            letter-spacing: 2px;
        }
        .brand span { color: var(--neon-blue); }

        .nav-item {
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            border-radius: 8px;
            transition: 0.3s;
            color: #888;
            font-family: 'Rajdhani';
            font-weight: 600;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .nav-item:hover, .nav-item.active {
            background: rgba(0, 243, 255, 0.1);
            color: var(--neon-blue);
            border-left: 3px solid var(--neon-blue);
        }
        .nav-item.gold:hover, .nav-item.gold.active {
            background: rgba(255, 215, 0, 0.1);
            color: var(--neon-gold);
            border-left: 3px solid var(--neon-gold);
        }

        /* --- MAIN CONTENT --- */
        .main-content {
            padding: 30px;
            overflow-y: auto;
        }

        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: var(--border);
        }

        .status-badge {
            font-family: 'Rajdhani';
            padding: 5px 15px;
            border: 1px solid var(--success);
            color: var(--success);
            border-radius: 20px;
            font-size: 0.9rem;
            background: rgba(0, 255, 157, 0.1);
        }

        .wallet-btn {
            background: transparent;
            border: 1px solid var(--neon-blue);
            color: var(--neon-blue);
            padding: 10px 20px;
            font-family: 'Orbitron';
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .wallet-btn:hover { background: var(--neon-blue); color: #000; box-shadow: 0 0 15px var(--neon-blue); }

        /* --- DASHBOARD CARDS --- */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .card {
            background: var(--panel-bg);
            border: var(--border);
            border-radius: 12px;
            padding: 25px;
            position: relative;
            transition: 0.3s;
            backdrop-filter: var(--glass);
        }
        .card:hover { transform: translateY(-5px); border-color: rgba(255,255,255,0.3); }
        
        .card h3 { 
            font-family: 'Rajdhani'; 
            color: #aaa; 
            font-size: 0.9rem; 
            text-transform: uppercase; 
            margin-bottom: 10px; 
            display: flex; justify-content: space-between;
        }
        .card .value { font-family: 'Orbitron'; font-size: 2rem; margin-bottom: 5px; }
        .card .subtext { font-size: 0.8rem; color: #666; }

        /* --- SECTIONS (HIDDEN BY DEFAULT) --- */
        .section-view { display: none; animation: fadeIn 0.5s; }
        .section-view.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- INTEGRATED IFRAME STYLE (For loading external modules if needed) --- */
        .module-frame {
            width: 100%;
            height: 600px;
            border: none;
            border-radius: 12px;
            background: #000;
        }

        /* --- TOKENOMICS & CONFIG VIEWER --- */
        .json-viewer {
            background: #111;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            color: var(--success);
            font-size: 0.8rem;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #333;
        }

        /* --- ACTION BUTTONS --- */
        .action-btn {
            width: 100%;
            padding: 15px;
            margin-top: 15px;
            border: none;
            font-family: 'Orbitron';
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
        }
        .btn-blue { background: rgba(0, 243, 255, 0.1); color: var(--neon-blue); border: 1px solid var(--neon-blue); }
        .btn-blue:hover { background: var(--neon-blue); color: #000; }
        .btn-gold { background: rgba(255, 215, 0, 0.1); color: var(--neon-gold); border: 1px solid var(--neon-gold); }
        .btn-gold:hover { background: var(--neon-gold); color: #000; }

        /* RESPONSIVE */
        @media (max-width: 900px) {
            .master-container { grid-template-columns: 1fr; }
            .sidebar { display: none; } /* Mobile menu implementation needed separately */
            .header-bar { flex-direction: column; gap: 15px; align-items: flex-start; }
        }
    </style>
</head>
<body>

<div class="master-container">
    
    <aside class="sidebar">
        <div class="brand">SKY_AI <span>HUB</span></div>
        
        <div class="nav-item active" onclick="switchView('dashboard')">
            <i class="fas fa-th-large"></i> Dashboard
        </div>
        <div class="nav-item" onclick="switchView('terminal')">
            <i class="fas fa-terminal"></i> Web3 Terminal
        </div>
        <div class="nav-item gold" onclick="switchView('founder')">
            <i class="fas fa-user-astronaut"></i> Founder DAO
        </div>
        <div class="nav-item" onclick="switchView('ai-nexus')">
            <i class="fas fa-brain"></i> AI Nexus
        </div>
        <div class="nav-item" onclick="switchView('settings')">
            <i class="fas fa-cogs"></i> Dev Config
        </div>

        <div style="margin-top: auto; font-size: 0.8rem; color: #444; text-align: center;">
            v9.0 Master Config<br>
            Powered by Gemini
        </div>
    </aside>

    <main class="main-content">
        
        <div class="header-bar">
            <div>
                <h1 id="page-title" style="font-family:'Orbitron'; margin-bottom:5px;">SYSTEM OVERVIEW</h1>
                <div style="display:flex; gap:10px; align-items:center;">
                    <span class="status-badge" id="system-status">● ONLINE</span>
                    <span style="color:#666; font-size:0.9rem;" id="config-source">Source: Local Fallback</span>
                </div>
            </div>
            <button class="wallet-btn" id="connectBtn" onclick="connectWallet()">
                <i class="fas fa-wallet"></i> CONNECT WALLET
            </button>
        </div>

        <div id="dashboard" class="section-view active">
            <div class="dashboard-grid">
                <div class="card">
                    <h3>Sky Token Price <i class="fas fa-chart-line" style="color:var(--neon-blue)"></i></h3>
                    <div class="value" id="token-price">Loading...</div>
                    <div class="subtext">Target: $1.00 (Pre-Burn)</div>
                </div>
                <div class="card" style="border-color:var(--neon-gold);">
                    <h3>Total Value Locked <i class="fas fa-lock" style="color:var(--neon-gold)"></i></h3>
                    <div class="value">$124,500</div>
                    <div class="subtext">Across Staking & Vaults</div>
                </div>
                <div class="card">
                    <h3>Active Bots <i class="fas fa-robot" style="color:var(--neon-purple)"></i></h3>
                    <div class="value">42</div>
                    <div class="subtext">Running on PythonAnywhere</div>
                </div>
            </div>

            <div class="card" style="height: 400px; padding: 0; overflow: hidden; margin-bottom: 30px;">
                <div class="tradingview-widget-container" style="height:100%;width:100%">
                    <div id="tradingview_main" style="height:100%;width:100%"></div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="card">
                    <h3><i class="fas fa-bolt"></i> Quick Snipe</h3>
                    <p style="color:#888; margin-bottom:15px;">Launch a $50 SOL Long position instantly via AI.</p>
                    <button class="action-btn btn-blue" onclick="switchView('terminal')">GO TO TERMINAL</button>
                </div>
                <div class="card">
                    <h3><i class="fas fa-crown"></i> Founder Access</h3>
                    <p style="color:#888; margin-bottom:15px;">Manage ecosystem governance and access VIP Vaults.</p>
                    <button class="action-btn btn-gold" onclick="switchView('founder')">VIP AREA</button>
                </div>
            </div>
        </div>

        <div id="terminal" class="section-view">
            <h2 style="font-family:'Rajdhani'; color:var(--neon-blue); margin-bottom:20px;">// WEB3 EXECUTION LAYER</h2>
            <div class="dashboard-grid">
                <div class="card">
                    <h3>Target Asset</h3>
                    <select id="asset-select" class="action-btn" style="padding:10px; margin:0; background:#000; color:#fff;">
                        <option value="BINANCE:SOLUSDC">SOL / USDC</option>
                        <option value="BINANCE:BNBUSDC">BNB / USDC</option>
                        <option value="BINANCE:BTCUSDC">BTC / USDC</option>
                    </select>
                </div>
                <div class="card">
                    <h3>Strategy</h3>
                    <div style="color:var(--success);">AI SNIPER (Aggressive)</div>
                </div>
            </div>
            <div class="card" style="height: 500px; padding:0;">
                <div id="terminal-chart" style="width:100%; height:100%;"></div>
            </div>
        </div>

        <div id="founder" class="section-view">
            <div class="card" style="border:1px solid var(--neon-gold); background: linear-gradient(135deg, rgba(20,20,20,0.9), rgba(50,40,10,0.3));">
                <div style="display:flex; align-items:center; gap:20px; margin-bottom:20px;">
                    <div style="width:80px; height:80px; background:#333; border-radius:50%; display:flex; align-items:center; justify-content:center; border:2px solid var(--neon-gold);">
                        <i class="fas fa-user-secret" style="font-size:40px; color:var(--neon-gold);"></i>
                    </div>
                    <div>
                        <h2 style="font-family:'Orbitron'; color:var(--neon-gold);">FOUNDER SANCTUM</h2>
                        <p style="color:#ccc;">Veres Barnabás | Lead Developer</p>
                    </div>
                </div>
                <p style="line-height:1.6; color:#ddd; margin-bottom:20px;">
                    "This interface connects the human intuition with machine precision. Use the controls below to inject liquidity directly into the Master Contracts."
                </p>
                <div class="dashboard-grid">
                    <button class="action-btn btn-gold" onclick="alert('BSC Contract Interaction Triggered')">
                        <i class="fab fa-bnb"></i> INJECT LIQUIDITY (BSC)
                    </button>
                    <button class="action-btn btn-blue" onclick="alert('SOL Contract Interaction Triggered')">
                        <i class="fas fa-bolt"></i> INJECT LIQUIDITY (SOL)
                    </button>
                </div>
            </div>
        </div>

        <div id="ai-nexus" class="section-view">
            <h2 style="font-family:'Rajdhani'; color:var(--neon-purple);">// GEMINI INTELLIGENCE</h2>
            <div class="card">
                <div id="ai-chat-window" style="height:300px; overflow-y:auto; border:1px solid #333; padding:15px; margin-bottom:15px; background:#000;">
                    <div style="color:var(--neon-purple); margin-bottom:10px;">[SkyAI]: Rendszer online. Elemzésre kész.</div>
                </div>
                <div style="display:flex; gap:10px;">
                    <input type="text" id="ai-input" placeholder="Kérdezz a piactól..." style="flex:1; padding:15px; background:#111; border:1px solid #333; color:#fff;">
                    <button class="action-btn btn-blue" style="width:auto; margin:0;" onclick="simulateAI()">SEND</button>
                </div>
            </div>
        </div>

        <div id="settings" class="section-view">
            <h2 style="font-family:'Rajdhani'; color:#888;">// SYSTEM CONFIGURATION</h2>
            <div class="card">
                <h3>Loaded Config (JSON)</h3>
                <p style="margin-bottom:10px; color:#666;">Ez az adat közvetlenül a skyai-master-config.json fájlból töltődik be.</p>
                <div class="json-viewer" id="json-display">
                    Loading config...
                </div>
                <button class="action-btn btn-blue" onclick="loadConfig()">FORCE REFRESH CONFIG</button>
            </div>
        </div>

    </main>
</div>

<script>
    // --- 1. CONFIG LOADER (THE CORE) ---
    // Ez a funkció köti össze mind az 5 repót
    const MASTER_CONFIG_URL = "skyai-master-config.json"; // GitHub Raw URL-re cserélendő élesben!

    let systemConfig = {};

    async function loadConfig() {
        try {
            // Szimulált fetch (mivel helyi fájlként lehet, hogy nincs szervered)
            // Élesben: const response = await fetch(MASTER_CONFIG_URL);
            
            // DEMO ADAT - Ezt cseréli le a valódi JSON tartalom
            const demoConfig = {
                "ecosystem": { "version": "9.0.1", "status": "operational" },
                "tokens": { 
                    "governance": { "symbol": "SKY", "price_usdc": 0.005 },
                    "utility": { "symbol": "SKY-VOUCHER" }
                },
                "contracts": { "bsc_router": "0x123...abc", "sol_program": "Sol123..." }
            };

            systemConfig = demoConfig; // Élesben: = await response.json();
            
            // UI Frissítése a config alapján
            document.getElementById('json-display').innerText = JSON.stringify(systemConfig, null, 2);
            document.getElementById('system-status').innerText = "● " + systemConfig.ecosystem.status.toUpperCase();
            document.getElementById('token-price').innerText = "$" + systemConfig.tokens.governance.price_usdc;
            
            console.log("✅ Config betöltve.");
        } catch (error) {
            console.error("Config hiba:", error);
            document.getElementById('json-display').innerText = "Hiba a config betöltésekor. Helyi mód.";
        }
    }

    // --- 2. NAVIGATION LOGIC ---
    function switchView(viewId) {
        // Hide all
        document.querySelectorAll('.section-view').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        
        // Show specific
        document.getElementById(viewId).classList.add('active');
        
        // Update menu active state (simple matching)
        event.currentTarget.classList.add('active'); // Csak akkor működik, ha kattintással hívjuk
        
        // Update Title
        document.getElementById('page-title').innerText = viewId.toUpperCase().replace('-', ' ');

        // Chart refresh if needed
        if(viewId === 'dashboard') loadChart('tradingview_main', 'BINANCE:BTCUSDC');
        if(viewId === 'terminal') loadChart('terminal-chart', 'BINANCE:SOLUSDC');
    }

    // --- 3. CHARTING (TradingView) ---
    function loadChart(containerId, symbol) {
        if(document.getElementById(containerId).innerHTML !== "") return; // Ne töltsd újra ha már ott van
        new TradingView.widget({
            "autosize": true,
            "symbol": symbol,
            "interval": "60",
            "timezone": "Etc/UTC",
            "theme": "dark",
            "style": "1",
            "locale": "en",
            "toolbar_bg": "#f1f3f6",
            "enable_publishing": false,
            "hide_top_toolbar": true,
            "container_id": containerId
        });
    }

    // --- 4. WALLET & AI ---
    function connectWallet() {
        // Egyszerűsített szimuláció a demo kedvéért
        const btn = document.getElementById('connectBtn');
        btn.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i> CONNECTING...';
        setTimeout(() => {
            btn.innerHTML = '<i class="fas fa-check-circle"></i> 0x4B...3A26';
            btn.style.borderColor = 'var(--success)';
            btn.style.color = 'var(--success)';
        }, 1500);
    }

    function simulateAI() {
        const input = document.getElementById('ai-input').value;
        const chat = document.getElementById('ai-chat-window');
        if(!input) return;

        chat.innerHTML += `<div style="color:#fff; margin:5px 0;">> ${input}</div>`;
        document.getElementById('ai-input').value = "";
        
        setTimeout(() => {
            chat.innerHTML += `<div style="color:var(--neon-purple); margin:5px 0;">[SkyAI]: Elemzés folyamatban... A trend bullish a BTC/USDC páron. Javaslat: Vétel.</div>`;
            chat.scrollTop = chat.scrollHeight;
        }, 1000);
    }

    // Init
    window.onload = function() {
        loadConfig();
        loadChart('tradingview_main', 'BINANCE:BTCUSDC');
    };

</script>
</body>
</html>
